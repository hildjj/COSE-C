language: c
compiler:
  - gcc
addons:
  apt:
    packages:
      - libssl-dev
before_install:
  - wget http://www.cmake.org/files/v3.3/cmake-3.3.1-Linux-x86_64.tar.gz -O /tmp/cmake.tar.gz
  - tar xzf /tmp/cmake.tar.gz
  - pip install cpp-coveralls --user `whoami`
  - export PATH=$PWD/cmake-3.3.1-Linux-x86_64/bin/:$HOME/.local/bin:$PATH

script:
  - mkdir build
  - cd build && cmake .. && make VERBOSE=1 all test
after_success:
  - coveralls --exclude lib --exclude tests --gcov-options '-lp'
